<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" 
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorator="layouts/LayoutGestaoPessoas">
<head>
	<title>Gestão Pessoas | Acompanhamento</title>
</head>

<section layout:fragment="conteudo">

  <div class="container-fluid titulo-pagina">
    <div class="container">
        <ul class="breadcrumb">
            <li><a th:href="@{/Estagiario}">Minhas Turmas</a></li>
            <li class="active">Acompanhamento Estagiário</li>
        </ul>
        <h1>Acompanhamento</h1>
    </div>
  </div>

	<div class="container animated fadeInRight"> 
	    <div class="row">
	    
	     <div class="col-md-7">

  			<div class="alert alert-dismissible alert-danger" th:if="${!#strings.isEmpty(error)}">
  				<button type="button" class="close" data-dismiss="alert">&times;</button>
  				<p th:text="${error}"></p>
			</div>

  			<div class="alert alert-dismissible alert-success" th:if="${!#strings.isEmpty(sucesso)}">
  				<button type="button" class="close" data-dismiss="alert">&times;</button>
  				<p th:text="${sucesso}"></p>
			</div>
	     
	     
	      	 <div class="panel panel-bluegray">
	          <div class="panel-heading">
	            <a class="panel-title" data-toggle="collapse" data-target="#frequencia"><i class="fa fa-caret-down" aria-hidden="true"></i> Frequência</a>
	          	<a href="#" class="btn btn-xs pull-right gp-btn-opcao">Detalhes</a>
	          </div>
	
	          <div id="frequencia" class="panel-body collapse in">
				  <table class="table table-hover">
				    <tbody>
				      <tr>
				        <td><strong>Horas estagiadas:</strong></td>
				        <td></td>
				      </tr>
				      <tr>
				        <td><strong>Presença:</strong></td>
				        <td></td>
				      </tr>
				      <tr>
				        <td><strong>Falta</strong></td>
				        <td></td>
				      </tr>
				      <tr>
				        <td><strong>Frequencias Pendentes</strong></td>
				        <td></td>
				      </tr>
				    </tbody>
				  </table>
	           </div>
	        </div>
	        <div class="panel panel-bluegray">
	          <div class="panel-heading">
	            <a class="panel-title" data-toggle="collapse" data-target="#planoEstagio"><i class="fa fa-caret-down" aria-hidden="true"></i> Plano de Estágio</a>
	          </div>
	          <div id="planoEstagio" class="panel-body collapse in">
				  <table th:if="${submissaoPlano} != null" class="table table-hover">
				    <tbody>
				      <tr>
				        <td class="gp-sem-borda"><strong>Documento</strong></td>
				        <td class="gp-sem-borda"><a class="gp-link-download-submissao" th:href="@{/Estagiario/Acompanhamento/{idEstagio}/DownloadPlano(idEstagio=${estagio.id})}" th:text="${#dates.format(submissaoPlano.submetidoEm, 'dd/MM/yyyy')} + ' - Plano de Estágio'"></a></td>
				      </tr>
				      <tr>
				        <td><strong>Status</strong></td>
				        <td th:text="${submissaoPlano.statusEntrega}"></td>
				      </tr>
				      <tr>
				        <td><strong>Nota</strong></td>
				        <td th:text="${submissaoPlano.nota}"></td>
				      </tr>
				      <tr>
				        <td><strong>Comentario</strong></td>
				        <td th:text="${submissaoPlano.comentario}"></td>
				      </tr>
				    </tbody>
				  </table>
				  
		            <div class="gp-modelo-doc">Modelo de Plano de Estágio 
		            	<a th:href="@{/documents/UFC-Quixada-Plano_Estagio_modelo.doc}">Clique aqui para baixar!</a>
		            	<span th:if="${submissaoPlano} != null">
		            		<a th:if="${#strings.equals(submissaoPlano.statusEntrega, 'SUBMETIDO')} or ${#strings.equals(submissaoPlano.statusEntrega, 'CORRECAO')}" href="#submissaoPlano" class="btn btn-success btn-sm pull-right gp-submissao-modal" data-toggle="modal">Editar Submissão</a>
		            	</span>
		            	<a th:if="${submissaoPlano} == null" href="#submissaoPlano" class="btn btn-success btn-sm pull-right gp-submissao-modal" data-toggle="modal">Submeter</a>
		            </div>    
	           </div>
	        </div>
	      
			<div class="panel panel-bluegray">
				<div class="panel-heading">
		            <a class="panel-title" data-toggle="collapse" data-target="#relatorioEstagio"><i class="fa fa-caret-down" aria-hidden="true"></i> Relatório de Estágio</a>
				</div>

				<div id="relatorioEstagio" class="panel-body collapse in">
		            <table th:if="${submissaoRelatorio} != null" class="table table-hover">
				    <tbody>
				      <tr>
				        <td class="gp-sem-borda"><strong>Documento</strong></td>
				        <td class="gp-sem-borda"><a class="gp-link-download-submissao" th:href="@{/Estagiario/Acompanhamento/{idEstagio}/DownloadRelatorio(idEstagio=${estagio.id})}" th:text="${#dates.format(submissaoRelatorio.submetidoEm, 'dd/MM/yyyy')} + ' - Relatório de Estágio'"></a></td>
				      </tr>
				      <tr>
				        <td><strong>Status</strong></td>
				        <td th:text="${submissaoRelatorio.statusEntrega}"></td>
				      </tr>
				      <tr>
				        <td><strong>Nota</strong></td>
				        <td th:text="${submissaoRelatorio.nota}"></td>
				      </tr>
				      <tr>
				        <td><strong>Comentario</strong></td>
				        <td th:text="${submissaoRelatorio.comentario}"></td>
				      </tr>
				    </tbody>
				  </table>
		            <div class="gp-modelo-doc">Modelo de Relatório de Estágio 
		            	<a th:href="@{/documents/UFC-Quixada-Relatorio_Final_Estagio-modelo.doc}">Clique aqui para baixar!</a>
		            	<span th:if="${submissaoRelatorio} != null">
		            		<a th:if="${#strings.equals(submissaoRelatorio.statusEntrega, 'SUBMETIDO')} or ${#strings.equals(submissaoRelatorio.statusEntrega, 'CORRECAO')}" href="#submissaoRelatorio" class="btn btn-success btn-sm pull-right gp-submissao-modal" data-toggle="modal">Editar Submissão</a>
		            	</span>
		            	<a th:if="${submissaoRelatorio} == null" href="#submissaoRelatorio" class="btn btn-success btn-sm pull-right gp-submissao-modal" data-toggle="modal">Submeter</a>
		            </div>       
				</div>
			</div>

     <div class="panel panel-bluegray">
	          <div class="panel-heading">
	            <a class="panel-title" data-toggle="collapse" data-target="#avaliacaoRendimento"><i class="fa fa-caret-down" aria-hidden="true"></i> Avaliação Rendimento</a>
			  </div>
	        <div id="avaliacaoRendimento" class="panel-body collapse in">
	         <div class="avaliacao" th:if="${estagio.avaliacaoRendimento != null}">
	   			<div class="row">
	         		<div class="col-md-12"><h6>ASSIDUIDADE E DISCIPLINA</h6></div>
				     <div class="col-md-12">
				      <strong>Frequência:</strong>
				      <p th:text="${estagio.avaliacaoRendimento.frequencia != null} ? ${estagio.avaliacaoRendimento.frequencia.descricaoItem} : ' '"></p>
				      </div>
				      <div class="col-md-12">
				      	<strong>Permanência:</strong>
				      	<p th:text="${estagio.avaliacaoRendimento.permanencia != null} ? ${estagio.avaliacaoRendimento.permanencia.descricaoItem} : ' '"> </p>
				      </div>
				      <div class="col-md-12">
				      	<strong>Disciplina quando ao cumprimento de normas:</strong>
				      	<p th:text="${estagio.avaliacaoRendimento.disciplina != null} ? ${estagio.avaliacaoRendimento.disciplina.descricaoItem} : ' '"></p>
				      </div>
				      <div class="col-md-12">
				      	<strong>Comentário:</strong>
				      	<p th:text="${estagio.avaliacaoRendimento.fatorAssuidadeDisciplinaComentario}"></p>
				      </div>
			     </div>
			     <hr/>
			      <div class="row">
				      	<div class="col-md-12"><h6 >INICIATIVA E PRODUTIVIDADE</h6></div>
				      	<div class="col-md-12">
				      		<strong>Iniciativa:</strong>
								<p th:text="${estagio.avaliacaoRendimento.iniciativa != null} ? ${estagio.avaliacaoRendimento.iniciativa.descricaoItem} : ' '"></p>
						 </div>
				      	<div class="col-md-12">
				      		<strong>Quantidade de Trabalho:</strong>
				      		<p th:text="${estagio.avaliacaoRendimento.quantidadeTrabalho !=null} ? ${estagio.avaliacaoRendimento.quantidadeTrabalho.descricaoItem} : ' '"></p>
				      	</div>
				      <div class="col-md-12">
				      		<strong>Qualidade de Trabalho:</strong>
				      		<p th:text="${estagio.avaliacaoRendimento.qualidadeTrabalho != null} ? ${estagio.avaliacaoRendimento.qualidadeTrabalho.descricaoItem} : ' '"></p> 
				      </div>
				      <div class="col-md-12">
				      		<strong>Cumprimento de prazos:</strong>
				      		<p th:text="${estagio.avaliacaoRendimento.cumprimentoPrazos  != null} ? ${estagio.avaliacaoRendimento.cumprimentoPrazos.descricaoItem} : ' '"></p>
			      	  </div>
			      	   <div class="col-md-12">
				      	<strong>Comentário:</strong>
				      	<p th:text="${estagio.avaliacaoRendimento.fatorIniciativaProdutividadeComentario}"></p>
				      </div>
			      </div>
			       <hr/>
			      <div class="row">
			      		<div class="col-md-12"><h6 >RESPONSABILIDADE</h6></div>
				      		<div class="col-md-12">
				      		<strong>Comprometimento com o trabalho:</strong>
				      		<p th:text="${estagio.avaliacaoRendimento.comprometimento != null} ? ${estagio.avaliacaoRendimento.comprometimento.descricaoItem} : ' '"></p>
				    	  </div>
				    	  <div class="col-md-12">
				      		<strong>Cuidado com materiais e equipamentos:</strong>
				      		<p th:text="${estagio.avaliacaoRendimento.cuidadoMateriais != null} ? ${estagio.avaliacaoRendimento.cuidadoMateriais.descricaoItem} : ' '"></p>
				    	  </div>
				    	 <div class="col-md-12">
				      		<strong>Comentário:</strong>
				      		<p th:text="${estagio.avaliacaoRendimento.fatorResponsabilidadeComentario}"></p>
				     	 </div>
			      </div>
			       <hr/>
			      <div class="row">
			      		<div class="col-md-12"><h6>RELACIONAMENTO</h6></div>
				      	<div class="col-md-12">
				      		<strong>Relacionamento junto a gerência e demais funcionários:</strong>
				      		<p th:text="${estagio.avaliacaoRendimento.relacionamento != null} ? ${estagio.avaliacaoRendimento.relacionamento.descricaoItem} : ' ' "></p>
				      	</div>
				      	<div class="col-md-12">
				      		<strong>Trabalho em equipe:</strong>
				      		<p th:text="${estagio.avaliacaoRendimento.trabalhoEquipe != null} ? ${estagio.avaliacaoRendimento.trabalhoEquipe.descricaoItem} : ' '"></p>
				     	 </div>
				     	 <div class="col-md-12">
				      		<strong>Comentário:</strong>
				      		<p th:text="${estagio.avaliacaoRendimento.fatorRelacionamentoComentario}"></p>
				     	 </div>
			     </div>
			  </div>
				          		
	           </div>
	        </div>
	
	      </div>
	    
	      <div class="col-md-5">

	      
	        <div class="panel panel-bluegray">
	          <div class="panel-heading">
	            <a class="panel-title" data-toggle="collapse" data-target="#detalhesTurma" th:inline="text"><i class="fa fa-caret-down" aria-hidden="true"></i> Turma: [[${estagio.turma.nome}]] - [[${estagio.turma.semestre}]]</a>
  			  </div>
	          <div id="detalhesTurma" class="panel-body collapse in">
				  <table class="table table-hover">
				    <tbody>
				      <tr>
				        <td class="gp-sem-borda"><strong>Orientador</strong></td>
				        <td class="gp-sem-borda" th:text="${estagio.turma.orientador.nome}"></td>
				      </tr>
				      <tr>
				        <td><strong>Supervisores</strong></td>
				        <td  th:inline="text"> <p th:each="sup : ${estagio.turma.supervisores}"> [[${sup.nome}]]</p> </td>
				      </tr>
				      <tr>
				        <td><strong>Período</strong></td>
				        <td th:text="${#dates.format(estagio.turma.inicio, 'dd/MM/yyyy')} + ' a ' + ${#dates.format(estagio.turma.termino, 'dd/MM/yyyy')}"></td>
				      </tr>
				    </tbody>
				  </table>
	           </div>
	        </div>
	        
	        <div th:if="${#strings.equals(estagio.turma.tipoTurma, 'NPI')}" class="panel panel-bluegray">
	          <div class="panel-heading">
	            <a class="panel-title" data-toggle="collapse" data-target="#expedienteTurma"><i class="fa fa-caret-down" aria-hidden="true"></i> Expediente da Turma</a>
  			  </div>
	          <div id="expedienteTurma" class="panel-body collapse in">
				  <table class="table table-hover">
				    <tbody>
				      <tr th:each="expediente : ${estagio.turma.expedientes}">
				        <td th:inline="text"><strong>[[${expediente.diaSemana.descricao}]]</strong></td>
				        <td th:inline="text">[[${#dates.format(expediente.horaInicio, 'HH:mm')}]] as [[${#dates.format(expediente.horaTermino, 'HH:mm')}]]</td>
				      </tr>
				    </tbody>
				  </table>
	           </div>
	        </div>
	
	        <div class="panel panel-bluegray">
	          <div class="panel-heading">
	            <a class="panel-title" data-toggle="collapse" data-target="#avaliacaoEstagio"><i class="fa fa-caret-down" aria-hidden="true"></i> Avaliação Final de Estágio</a>
	          </div>
	
	          <div id="avaliacaoEstagio" class="panel-body collapse in">
				  <table class="table table-hover">
				    <tbody>
				      <tr>
				        <td class="gp-sem-borda"><strong>Situação</strong></td>
				        <td class="gp-sem-borda" th:text="${estagio.situacao}"></td>
				      </tr>
				      <tr>
				        <td><strong>Nota</strong></td>
				        <td th:inline="text"> <p th:if="${#strings.equals(estagio.situacao, 'CONCLUIDO')}" th:text="${estagio.nota}"></p> </td>
				      </tr>
				      <tr>
				        <td><strong>Resultado</strong></td>
				        <td th:inline="text"> <p th:if="${#strings.equals(estagio.situacao, 'CONCLUIDO')}" th:text="${estagio.resultado.descricao}"></p> </td>
				      </tr>
				    </tbody>
				  </table>
	           </div>
	        </div>
	      </div>
	      

	      
	    </div>
	
	</div>


		<div th:if="${submissaoPlano} == null"  id="submissaoPlano" class="modal">
			 <form class="form-horizontal" th:action="@{/Estagiario/Acompanhamento/{idEstagio}/SubmeterPlano(idEstagio=${estagio.id})}" method="post" enctype="multipart/form-data">
			   <div class="modal-dialog">
			     <div class="modal-content">
			       <div class="modal-header">
			         <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
			         <h4 class="modal-title">Plano de Estágio</h4>
			       </div>
			
			         <div class="modal-body">
			             <label for="inputArquivo">Plano de Estágio</label><br/>
			             <input type="file" class="form-control" id="inputArquivo" placeholder="Arquivo" name="planoEstagio" /> 
			         </div>
			         
			         <div class="modal-footer">
			           <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
			           <button type="submit" class="btn btn-success">Submeter <i class="fa fa-arrow-circle-up" aria-hidden="true"></i></button>
			         </div>
			     </div>
			   </div>
			   </form>
		</div>
			<div th:if="${submissaoPlano} != null" id="submissaoPlano" class="modal">
			<form class="form-horizontal" th:action="@{/Estagiario/Acompanhamento/{idEstagio}/EditarPlano(idEstagio=${estagio.id})}" method="post" enctype="multipart/form-data"> 
				<div class="modal-dialog">
				     <div class="modal-content">
				       <div class="modal-header">
				         <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
				         <h4 class="modal-title">Editar Plano de Estágio</h4>
				       </div>
				
				         <div class="modal-body">
				             <label for="inputArquivo">Plano de Estágio</label><br/>
				             <input type="file" class="form-control" id="inputArquivo" placeholder="Arquivo" name="planoEstagio" /> 
				         </div>
				         
				         <div class="modal-footer">
				           <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
				           <button type="submit" class="btn btn-success">Submeter <i class="fa fa-arrow-circle-up" aria-hidden="true"></i></button>
				         </div>
				     </div>
				   </div>
				</form>
			</div>


	     <div th:if="${submissaoRelatorio} == null" id="submissaoRelatorio" class="modal">
	     	<form class="form-horizontal" th:action="@{/Estagiario/Acompanhamento/{idEstagio}/SubmeterRelatorio(idEstagio=${estagio.id})}" method="post" enctype="multipart/form-data">
			   <div class="modal-dialog">
			     <div class="modal-content">
			       <div class="modal-header">
			         <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
			         <h4 class="modal-title">Relatório de Estágio</h4>
			       </div>
			
			         <div class="modal-body">
			             <label for="inputArquivo">Relatório de Estágio</label><br/>
			             <input type="file" class="form-control" id="inputArquivo" placeholder="Arquivo" name="relatorio" /> 
			         </div>
			         
			         <div class="modal-footer">
			           <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
			           <button type="submit" class="btn btn-success">Submeter <i class="fa fa-arrow-circle-up" aria-hidden="true"></i></button>
			         </div>
			     </div>
			   </div>	 
	     	</form>	
	     </div>
	     <div th:if="${submissaoRelatorio} != null" id="submissaoRelatorio" class="modal">
	     	<form class="form-horizontal" th:action="@{/Estagiario/Acompanhamento/{idEstagio}/EditarRelatorio(idEstagio=${estagio.id})}" method="post" enctype="multipart/form-data">
			   <div class="modal-dialog">
			     <div class="modal-content">
			       <div class="modal-header">
			         <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
			         <h4 class="modal-title">Editar Relatório de Estágio</h4>
			       </div>
			
			         <div class="modal-body">
			             <label for="inputArquivo">Relatório de Estágio</label><br/>
			             <input type="file" class="form-control" id="inputArquivo" placeholder="Arquivo" name="relatorio" /> 
			         </div>
			         
			         <div class="modal-footer">
			           <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
			           <button type="submit" class="btn btn-success">Submeter <i class="fa fa-arrow-circle-up" aria-hidden="true"></i></button>
			         </div>
			     </div>
			   </div>	 
	     	</form>	
	     </div>
	     
  </section>
</html>
